if(CMAKE_CXX_COMPILER_ID MATCHES "MSVC")
  add_compile_options(
    /wd4100
    /wd4201
    /wd4456
    /wd4457
    /wd4702
    /wd4815
    /wd4459
    /wd4244
    /wd4127
  )
endif()

set(
  RE2_SOURCES
  re2/re2/bitstate.cc
  re2/re2/compile.cc
  re2/re2/dfa.cc
  re2/re2/filtered_re2.cc
  re2/re2/mimics_pcre.cc
  re2/re2/nfa.cc
  re2/re2/onepass.cc
  re2/re2/parse.cc
  re2/re2/perl_groups.cc
  re2/re2/prefilter.cc
  re2/re2/prefilter_tree.cc
  re2/re2/prog.cc
  re2/re2/re2.cc
  re2/re2/regexp.cc
  re2/re2/set.cc
  re2/re2/simplify.cc
  re2/re2/stringpiece.cc
  re2/re2/tostring.cc
  re2/re2/unicode_casefold.cc
  re2/re2/unicode_groups.cc
  re2/util/rune.cc
  re2/util/strutil.cc
)

add_wn_library(
  re2
  SOURCES
    ${RE2_SOURCES}
  INCLUDES
    re2
)

set(
  EFFCEE_SOURCES
  effcee/effcee/check.cc
  effcee/effcee/match.cc
)

add_wn_library(
  effcee
  SOURCES
    ${EFFCEE_SOURCES}
  INCLUDES
    re2
    effcee
  LIBS
    re2
)

add_subdirectory(librocket)

set(RAPIDJSON_SOURCES
  rapidjson/include/rapidjson/allocators.h
  rapidjson/include/rapidjson/cursorstreamwrapper.h
  rapidjson/include/rapidjson/document.h
  rapidjson/include/rapidjson/encodedstream.h
  rapidjson/include/rapidjson/encodings.h
  rapidjson/include/rapidjson/filereadstream.h
  rapidjson/include/rapidjson/filewritestream.h
  rapidjson/include/rapidjson/fwd.h
  rapidjson/include/rapidjson/istreamwrapper.h
  rapidjson/include/rapidjson/memorybuffer.h
  rapidjson/include/rapidjson/memorystream.h
  rapidjson/include/rapidjson/ostreamwrapper.h
  rapidjson/include/rapidjson/pointer.h
  rapidjson/include/rapidjson/prettywriter.h
  rapidjson/include/rapidjson/rapidjson.h
  rapidjson/include/rapidjson/reader.h
  rapidjson/include/rapidjson/schema.h
  rapidjson/include/rapidjson/stream.h
  rapidjson/include/rapidjson/stringbuffer.h
  rapidjson/include/rapidjson/writer.h
  rapidjson/include/rapidjson/error/en.h
  rapidjson/include/rapidjson/error/error.h
  rapidjson/include/rapidjson/internal/biginteger.h
  rapidjson/include/rapidjson/internal/clzll.h
  rapidjson/include/rapidjson/internal/diyfp.h
  rapidjson/include/rapidjson/internal/dtoa.h
  rapidjson/include/rapidjson/internal/ieee754.h
  rapidjson/include/rapidjson/internal/itoa.h
  rapidjson/include/rapidjson/internal/meta.h
  rapidjson/include/rapidjson/internal/pow10.h
  rapidjson/include/rapidjson/internal/regex.h
  rapidjson/include/rapidjson/internal/stack.h
  rapidjson/include/rapidjson/internal/strfunc.h
  rapidjson/include/rapidjson/internal/strtod.h
  rapidjson/include/rapidjson/internal/swap.h
  rapidjson/include/rapidjson/msinttypes/inttypes.h
  rapidjson/include/rapidjson/msinttypes/stdint.h
)

add_wn_header_library(
  rapidjson
  SOURCES
    ${RAPIDJSON_SOURCES}
  INCLUDES
    rapidjson/include
)
